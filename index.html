import streamlit as st
import time

# Fonction pour afficher du texte progressivement
def afficher_texte_avec_delai(texte, vitesse=0.05):
    for mot in texte.split():
        st.write(mot + " ", end=" ")
        time.sleep(vitesse)
    st.write("")

# Initialisation de l'état de session
if "page" not in st.session_state:
    st.session_state.page = 1

# Navigation entre pages
def aller_a_page(p):
    st.session_state.page = p

# --- PAGE 1 ---
if st.session_state.page == 1:
    st.image("pexels-osmachko-235243.jpg", use_container_width=True)
    afficher_texte_avec_delai("Salut, nous sommes le [date et heure à modifier ultérieurement] en direct de la maternité de Voiron où j’ai fait la rencontre de mon papa et de ma maman. Avant de te montrer ma frimousse, je te propose notre premier jeu ensemble !", vitesse=0.1)
    st.button("C'est parti !", on_click=lambda: aller_a_page(2))

# --- PAGE 2 ---
elif st.session_state.page == 2:
    afficher_texte_avec_delai("Qui joue ?", vitesse=0.1)
    col1, col2 = st.columns(2)
    with col1:
        st.button("Maman", on_click=lambda: aller_a_page(3))
    with col2:
        st.button("Papa", on_click=lambda: aller_a_page(3))

# --- PAGE 3 ---
elif st.session_state.page == 3:
    afficher_texte_avec_delai("Prêt pour la mission ?", vitesse=0.1)
    col1, col2 = st.columns(2)
    with col1:
        st.button("Oui", on_click=lambda: aller_a_page(4))
    with col2:
        st.button("Non", on_click=lambda: aller_a_page(9))

# --- PAGE 4 ---
elif st.session_state.page == 4:
    afficher_texte_avec_delai("Super ! Voici ta première énigme : Je suis une lettre qui se cache dans le prénom du bébé, et je me trouve aussi dans le mot AMOUR. Quelle est cette lettre ?", vitesse=0.1)
    col1, col2 = st.columns(2)
    with col1:
        st.button("Indice", on_click=lambda: aller_a_page(5))
    with col2:
        st.button("Réponse", on_click=lambda: aller_a_page(6))

# --- PAGE 5 ---
elif st.session_state.page == 5:
    afficher_texte_avec_delai("Indice : Cette lettre est une voyelle.", vitesse=0.1)
    st.button("Réponse", on_click=lambda: aller_a_page(6))

# --- PAGE 6 ---
elif st.session_state.page == 6:
    afficher_texte_avec_delai("Bravo ! C'était bien la lettre A. Continue pour découvrir le prénom.", vitesse=0.1)
    st.button("Tentative de prénom", on_click=lambda: aller_a_page(7))

# --- PAGE 7 ---
elif st.session_state.page == 7:
    afficher_texte_avec_delai("As-tu deviné le prénom du bébé ?", vitesse=0.1)
    st.text_input("Écris ta tentative ici :")
    st.button("Valider", on_click=lambda: aller_a_page(8))

# --- PAGE 8 ---
elif st.session_state.page == 8:
    st.image("pexels-osmachko-235243.jpg", use_container_width=True)
    afficher_texte_avec_delai("Félicitations ! Tu as découvert mon prénom. Merci d’avoir joué avec moi.", vitesse=0.1)
    st.button("Mission terminée", on_click=lambda: aller_a_page(9))

# --- PAGE 9 ---
elif st.session_state.page == 9:
    afficher_texte_avec_delai("Merci d’avoir participé à la mission !", vitesse=0.1)
    st.button("Recommencer toute la mission", on_click=lambda: aller_a_page(1))
